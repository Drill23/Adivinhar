<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Neural Reader Pro</title>
    <style>
        :root {
            --bg: #000000;
            --accent: #0affea; /* Ciano Neon */
            --accent-dim: rgba(10, 255, 234, 0.1);
            --text-main: #ffffff;
            --col-border: #333;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg);
            color: var(--text-main);
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
            overflow: hidden; /* Proibido rolar */
            height: 100vh; width: 100vw;
            display: flex; flex-direction: column;
            user-select: none;
        }

        /* HEADER COMPACTO */
        header {
            height: 12vh; /* Fixo 12% da tela */
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            border-bottom: 1px solid #222;
            z-index: 10; background: #050505;
        }

        h2 { margin: 0; font-size: 16px; letter-spacing: 2px; color: var(--accent); text-transform: uppercase; }
        p.instruction { margin: 5px 0 0; font-size: 14px; color: #888; }

        /* ÁREA DO JOGO */
        #game-area {
            height: 88vh; /* Ocupa o resto da tela inteira (100 - 12) */
            width: 100%;
            display: flex; /* Colunas lado a lado */
            padding: 0;
        }

        /* AS COLUNAS (PILARES) */
        .column {
            flex: 1; /* Largura igual para todas */
            display: flex;
            flex-direction: column; /* Números um embaixo do outro */
            border-right: 1px solid var(--col-border); /* Linha divisória fina */
            cursor: pointer;
            transition: background 0.1s;
            position: relative;
        }
        
        .column:last-child { border-right: none; } /* Remove borda da última */
        
        .column:active { background: var(--accent-dim); } /* Feedback de toque */

        /* NÚMEROS */
        .num-item {
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Courier New', monospace; /* Fonte técnica */
            font-weight: 700;
            width: 100%;
            /* O SEGREDO: Flex-grow faz o número esticar para ocupar o espaço vazio */
            flex-grow: 1; 
        }

        /* CONFIGURAÇÕES ESPECÍFICAS POR FASE (TAMANHO DA FONTE) */
        
        /* Fase 1 (3 Colunas): Muitos números (~33 por coluna) */
        .phase-3 .num-item { 
            font-size: 2.2vh; /* Tamanho responsivo baseado na altura da tela */
            color: #ccc;
        }

        /* Fase 2 (5 Colunas): Médio (~20 por coluna) */
        .phase-5 .num-item { 
            font-size: 3.5vh; /* Bem maior */
            color: #ddd;
        }

        /* Fase 3 (7 Colunas): Poucos números (~14 por coluna) */
        .phase-7 .num-item { 
            font-size: 5vh; /* GIGANTE */
            color: var(--accent);
            text-shadow: 0 0 10px var(--accent-dim);
        }

        /* TELAS DE OVERLAY (INICIO/FIM) */
        .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 50;
            transition: opacity 0.4s;
        }
        .hidden { opacity: 0; pointer-events: none; visibility: hidden; }

        .btn-neon {
            margin-top: 40px; padding: 20px 60px;
            font-size: 20px; color: var(--bg); background: var(--accent);
            border: none; border-radius: 4px; font-weight: bold; letter-spacing: 1px;
            box-shadow: 0 0 20px var(--accent); cursor: pointer;
        }

        #result-display {
            font-size: 150px; font-weight: 900; color: var(--accent);
            text-shadow: 0 0 40px var(--accent); margin: 20px 0;
        }
    </style>
</head>
<body>

    <div id="start-screen" class="overlay">
        <h1 style="font-size: 40px; margin-bottom: 10px; color: #fff;">ORÁCULO</h1>
        <p style="color: #666; font-size: 18px;">Pense em um número (1 a 100)</p>
        <button class="btn-neon" onclick="startGame()">INICIAR</button>
    </div>

    <header>
        <h2 id="phase-txt">FASE 1</h2>
        <p class="instruction">Toque na COLUNA onde está seu número</p>
    </header>

    <div id="game-area">
        </div>

    <div id="loading-screen" class="overlay hidden">
        <div style="width: 50px; height: 50px; border: 5px solid #333; border-top-color: var(--accent); border-radius: 50%; animation: spin 1s infinite;"></div>
        <p style="margin-top: 20px; color: var(--accent); letter-spacing: 3px;">CALCULANDO...</p>
    </div>
    <style>@keyframes spin { to { transform: rotate(360deg); } }</style>

    <div id="result-screen" class="overlay hidden">
        <p style="color: #888; text-transform: uppercase; letter-spacing: 2px;">Número detectado</p>
        <div id="result-display">0</div>
        <p style="color: #444; margin-top: 20px;">Toque para reiniciar</p>
    </div>

    <script>
        let state = { r3: 0, r5: 0, r7: 0 };

        function startGame() {
            document.getElementById('start-screen').classList.add('hidden');
            renderColumns(3);
        }

        function renderColumns(modulus) {
            const container = document.getElementById('game-area');
            const phaseTxt = document.getElementById('phase-txt');
            
            // Limpa e define a classe da fase para ajustar o tamanho da fonte (CSS)
            container.innerHTML = '';
            container.className = `phase-${modulus}`;
            
            // Atualiza texto do header
            phaseTxt.innerText = modulus === 3 ? "SCAN 1/3" : modulus === 5 ? "SCAN 2/3" : "SCAN 3/3";

            // Cria as colunas
            for (let r = 0; r < modulus; r++) {
                const col = document.createElement('div');
                col.className = 'column';

                // Preenche com números
                for (let n = 1; n <= 100; n++) {
                    if (n % modulus === r) {
                        const num = document.createElement('div');
                        num.className = 'num-item';
                        // Se for menor que 10, adiciona zero (05, 09) para ficar alinhado bonito
                        num.innerText = n < 10 ? '0'+n : n;
                        col.appendChild(num);
                    }
                }

                // Clique na coluna inteira
                col.onclick = () => {
                    // Feedback visual rápido
                    col.style.background = '#fff'; 
                    setTimeout(() => { 
                        col.style.background = ''; 
                        nextLevel(r, modulus); 
                    }, 100);
                };

                container.appendChild(col);
            }
        }

        function nextLevel(remainder, currentMod) {
            if (currentMod === 3) state.r3 = remainder;
            if (currentMod === 5) state.r5 = remainder;
            if (currentMod === 7) state.r7 = remainder;

            if (currentMod === 3) renderColumns(5);
            else if (currentMod === 5) renderColumns(7);
            else if (currentMod === 7) showResult();
        }

        function showResult() {
            const load = document.getElementById('loading-screen');
            const res = document.getElementById('result-screen');
            
            load.classList.remove('hidden');

            setTimeout(() => {
                // Cálculo Matemático
                let x = (70 * state.r3 + 21 * state.r5 + 15 * state.r7) % 105;
                if (x === 0) x = 105;

                document.getElementById('result-display').innerText = x;
                load.classList.add('hidden');
                res.classList.remove('hidden');
            }, 2000);
        }

        document.getElementById('result-screen').onclick = () => location.reload();
    </script>
</body>
</html>
